<!DOCTYPE html>
<html lang="pt-br">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0">
  <title>Termo – Segunda Via de Ticket</title>
  <link rel="stylesheet" href="/public/css/style.css">
</head>

<body>

  <div class="container">
    <h1>TERMO DE SEGUNDA VIA DE TICKET</h1>

    <p class="texto-termo">
      Declaro que solicitei a segunda via de ticket de estacionamento por motivo de perda,
      estando ciente das regras vigentes do estacionamento e assumindo total responsabilidade
      pelas informações prestadas neste formulário.
    </p>

    <form method="POST" action="/salvar">

      <div class="grupo">
        <label>Nome do Cliente</label>
        <input type="text" name="nome" required>
      </div>

      <div class="grupo">
        <label>CPF / Documento</label>
        <input type="text" name="documento" required>
      </div>

      <div class="grupo">
        <label>Placa do Veículo</label>
        <input type="text" name="placa" required>
      </div>

      <div class="grupo">
        <label>Data</label>
        <input type="date" name="data" required>
      </div>

      <hr>

      <div class="grupo">
        <label>Motivo da Segunda Via</label>
        <select name="motivo" required>
          <option value="">Selecione</option>
          <option value="Perda do ticket">Perda do ticket</option>
          <option value="Problema na leitura">Problema na leitura</option>
          <option value="Ticket não emitido">Ticket não emitido</option>
          <option value="Outro">Outro</option>
        </select>
      </div>

      <hr>
      <h3>Fotos do Atendimento (até 5)</h3>
      <div id="fotosSection">
        <div id="fotosContainer" style="display:flex;gap:8px;flex-wrap:wrap;margin-bottom:8px;"></div>
        <div>
          <button type="button" id="tirarFotoBtn">Tirar foto</button>
          <small style="margin-left:8px;color:#666;">Mostra somente miniaturas; clique para substituir.</small>
        </div>
        <div id="hiddenFotos"></div>
      </div>

      <h3>Assinatura do Cliente</h3>

      <div class="assinatura-area" id="assinaturaArea">
        <canvas id="canvas"></canvas>
        <input type="hidden" name="assinatura" id="assinaturaInput">
      </div>

      <div class="botoes" id="assinaturaBotoes">
        <button type="button" onclick="limparAssinatura()">Limpar</button>
        <button type="button" onclick="confirmarAssinatura()">Confirmar Assinatura</button>
      </div>

      <div class="assinatura-fixada" id="assinaturaFixada" style="display:none;">
        <p>Assinatura confirmada:</p>
        <img id="assinaturaImg" alt="Assinatura confirmada">
        <div style="margin-top:8px;">
          <button type="button" id="editarAssinaturaBtn" onclick="editarAssinatura()">Editar assinatura</button>
        </div>
      </div>

      <hr>

      <div style="margin-top:12px;">
        <label>
          <input type="checkbox" name="lgpd" id="lgpdCheckbox" required>
          Li e concordo com o tratamento dos meus dados pessoais (LGPD)
        </label>
      </div>

      <button class="btn-enviar" type="submit">Finalizar Atendimento</button>

    </form>
  </div>

  <script src="/public/js/assinatura.js"></script>
  <script src="/public/js/fotos.js"></script>
</body>

</html>